2022-09-28 00:03:00.551 | INFO     | main:create_app:26 - 日志初始化成功！
2022-09-28 00:03:00.717 | INFO     | db.init_db:drop_db:40 - 删除表成功!!!
2022-09-28 00:03:00.918 | INFO     | db.init_db:init_db:28 - 创建表成功!!!
2022-09-28 00:03:00.956 | INFO     | db.init_db:init_data:65 - 成功初始化表数据!!!
2022-09-28 00:03:02.517 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-28 00:03:02.584 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
POSTURL:http://127.0.0.1:8082/api/system/login
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'origin': 'http://localhost:2888', 'sec-ch-ua-platform': '"macOS"', 'token': 'null', 'accept': 'application/json, text/plain, */*', 'content-type': 'multipart/form-data; boundary=----WebKitFormBoundarya6oSnX9oYwYfHrdH', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'content-length': '250', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 76, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 101, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 92, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 147, in simple_response
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/login.py", line 20, in login_access_token
    token = await toLogin.go(db, request=request, form_data=form_obj)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/crud/login.py", line 35, in go
    await db.execute(set_ipconfig)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 211, in execute
    return await greenlet_spawn(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 136, in greenlet_spawn
    result = context.switch(value)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1695, in execute
    result = compile_state_cls.orm_setup_cursor_result(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1863, in orm_setup_cursor_result
    cls._do_post_synchronize_evaluate(session, result, update_options)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 2246, in _do_post_synchronize_evaluate
    attributes.instance_state(obj),
AttributeError: 'NoneType' object has no attribute '_sa_instance_state'

2022-09-28 00:03:04.058 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-28 00:03:04.072 | INFO     | utils.resp_code:resp_200:10 - 登录成功
2022-09-28 00:03:04.094 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-28 00:03:04.124 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
GETURL:http://127.0.0.1:8082/api/system/getInfo
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJodHRwczovL2dpbWcyLmJhaWR1LmNvbS9pbWFnZV9zZWFyY2gvc3JjPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiUyRmxhcmdlJTJGMDA2QVBvRllseThndTJxNjd4N2g3ZzMwZGMwZGMwdTAuZ2lmJnJlZmVyPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiZhcHA9MjAwMiZzaXplPWY5OTk5LDEwMDAwJnE9YTgwJm49MCZnPTBuJmZtdD1hdXRvP3NlYz0xNjYwOTAwMDQzJnQ9YTBlM2I3ZTdkZGMwZTg5YmQ2ZDBlYWZiYzI3ZmY4YTUiLCJ1c2VySWQiOiJzdXBlckFkbWluIiwidXNlcm5hbWUiOiJzdXBlckFkbWluIiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yOFQwMDowMzowMCIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDAiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOm51bGwsInN0YXR1cyI6IjEiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOS0yOFQwMDowMzowMCIsImRlbGV0ZSI6IjAiLCJleHAiOjE2NjQzODA5ODR9.ZZ-8NMPMIWLe0kkku4mLg97HN4gyWVCWvylj78K9rTU', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 76, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 101, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/admin.py", line 30, in user_info
    return resp_200(data={"codes": routers["codes"], "roles": [user["userId"]], "routers": routers["menus"], "user": user})
TypeError: 'NoneType' object is not subscriptable

2022-09-28 00:03:04.957 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-28 00:03:04.969 | INFO     | utils.resp_code:resp_200:10 - 登录成功
2022-09-28 00:03:04.985 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-28 00:03:05.002 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
GETURL:http://127.0.0.1:8082/api/system/getInfo
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJodHRwczovL2dpbWcyLmJhaWR1LmNvbS9pbWFnZV9zZWFyY2gvc3JjPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiUyRmxhcmdlJTJGMDA2QVBvRllseThndTJxNjd4N2g3ZzMwZGMwZGMwdTAuZ2lmJnJlZmVyPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiZhcHA9MjAwMiZzaXplPWY5OTk5LDEwMDAwJnE9YTgwJm49MCZnPTBuJmZtdD1hdXRvP3NlYz0xNjYwOTAwMDQzJnQ9YTBlM2I3ZTdkZGMwZTg5YmQ2ZDBlYWZiYzI3ZmY4YTUiLCJ1c2VySWQiOiJzdXBlckFkbWluIiwidXNlcm5hbWUiOiJzdXBlckFkbWluIiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yOFQwMDowMzowMCIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDQiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOiIxMjcuMC4wLjEiLCJzdGF0dXMiOiIxIiwiY3JlYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDAiLCJkZWxldGUiOiIwIiwiZXhwIjoxNjY0MzgwOTg0fQ.f_IASyWQ4uQVkijv3N9FlD6GYupzgU9ab54VOztEmLg', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 76, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 101, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/admin.py", line 30, in user_info
    return resp_200(data={"codes": routers["codes"], "roles": [user["userId"]], "routers": routers["menus"], "user": user})
TypeError: 'NoneType' object is not subscriptable

2022-09-28 00:03:05.625 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-28 00:03:05.637 | INFO     | utils.resp_code:resp_200:10 - 登录成功
2022-09-28 00:03:05.649 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-28 00:03:05.665 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
GETURL:http://127.0.0.1:8082/api/system/getInfo
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJodHRwczovL2dpbWcyLmJhaWR1LmNvbS9pbWFnZV9zZWFyY2gvc3JjPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiUyRmxhcmdlJTJGMDA2QVBvRllseThndTJxNjd4N2g3ZzMwZGMwZGMwdTAuZ2lmJnJlZmVyPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiZhcHA9MjAwMiZzaXplPWY5OTk5LDEwMDAwJnE9YTgwJm49MCZnPTBuJmZtdD1hdXRvP3NlYz0xNjYwOTAwMDQzJnQ9YTBlM2I3ZTdkZGMwZTg5YmQ2ZDBlYWZiYzI3ZmY4YTUiLCJ1c2VySWQiOiJzdXBlckFkbWluIiwidXNlcm5hbWUiOiJzdXBlckFkbWluIiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yOFQwMDowMzowMCIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDQiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOiIxMjcuMC4wLjEiLCJzdGF0dXMiOiIxIiwiY3JlYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDAiLCJkZWxldGUiOiIwIiwiZXhwIjoxNjY0MzgwOTg1fQ.tEOWMGVuMCSYTBpK8CcLKoL9xkASEX_YGX3zE3KvqDQ', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 76, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 101, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/admin.py", line 30, in user_info
    return resp_200(data={"codes": routers["codes"], "roles": [user["userId"]], "routers": routers["menus"], "user": user})
TypeError: 'NoneType' object is not subscriptable

2022-09-28 00:03:06.275 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-28 00:03:06.288 | INFO     | utils.resp_code:resp_200:10 - 登录成功
2022-09-28 00:03:06.301 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-28 00:03:06.315 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
GETURL:http://127.0.0.1:8082/api/system/getInfo
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJodHRwczovL2dpbWcyLmJhaWR1LmNvbS9pbWFnZV9zZWFyY2gvc3JjPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiUyRmxhcmdlJTJGMDA2QVBvRllseThndTJxNjd4N2g3ZzMwZGMwZGMwdTAuZ2lmJnJlZmVyPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiZhcHA9MjAwMiZzaXplPWY5OTk5LDEwMDAwJnE9YTgwJm49MCZnPTBuJmZtdD1hdXRvP3NlYz0xNjYwOTAwMDQzJnQ9YTBlM2I3ZTdkZGMwZTg5YmQ2ZDBlYWZiYzI3ZmY4YTUiLCJ1c2VySWQiOiJzdXBlckFkbWluIiwidXNlcm5hbWUiOiJzdXBlckFkbWluIiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yOFQwMDowMzowMCIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDUiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOiIxMjcuMC4wLjEiLCJzdGF0dXMiOiIxIiwiY3JlYXRlZF9hdCI6IjIwMjItMDktMjhUMDA6MDM6MDAiLCJkZWxldGUiOiIwIiwiZXhwIjoxNjY0MzgwOTg2fQ.BG8cquBeumy2MCPrzpRmJ7nSU9jIq7WTR2225xxLV_o', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 76, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 101, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/admin.py", line 30, in user_info
    return resp_200(data={"codes": routers["codes"], "roles": [user["userId"]], "routers": routers["menus"], "user": user})
TypeError: 'NoneType' object is not subscriptable

