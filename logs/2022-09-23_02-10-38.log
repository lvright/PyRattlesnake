2022-09-23 02:10:38.988 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-23 02:10:39.005 | WARNING  | register.exception:access_token_fail_handler:58 - token已过期! -- Signature has expired.
URL:GET-http://127.0.0.1:8082/api/system/getInfo
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXIiOiJodHRwczovL2dpbWcyLmJhaWR1LmNvbS9pbWFnZV9zZWFyY2gvc3JjPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiUyRmxhcmdlJTJGMDA2QVBvRllseThndTJxNjd4N2g3ZzMwZGMwZGMwdTAuZ2lmJnJlZmVyPWh0dHAlM0ElMkYlMkZ3eDEuc2luYWltZy5jbiZhcHA9MjAwMiZzaXplPWY5OTk5LDEwMDAwJnE9YTgwJm49MCZnPTBuJmZtdD1hdXRvP3NlYz0xNjYwOTAwMDQzJnQ9YTBlM2I3ZTdkZGMwZTg5YmQ2ZDBlYWZiYzI3ZmY4YTUiLCJ1c2VySWQiOiJzdXBlckFkbWluIiwidXNlcm5hbWUiOiJzdXBlckFkbWluIiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yMVQyMjo0Mjo0MyIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjFUMjI6NDI6NDMiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOm51bGwsInN0YXR1cyI6IjEiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOS0yMVQyMjo0Mjo0MyIsImRlbGV0ZSI6IjAiLCJleHAiOjE2NjM4NTc3NjN9.wzkviulfJaFPXdDyieoqdgIAlpuuCNPMKlX2w27EuBQ', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
2022-09-23 02:23:14.200 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:POST-url:http://127.0.0.1:8082/api/system/login
2022-09-23 02:23:14.281 | INFO     | utils.resp_code:resp_200:10 - 登录成功
2022-09-23 02:23:14.302 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/getInfo
2022-09-23 02:23:14.332 | INFO     | utils.resp_code:resp_200:10 - OK
2022-09-23 02:23:14.760 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/common/getNoticeList?pageSize=5&orderBy=id&orderType=desc
2022-09-23 02:23:20.456 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/menu/index?page=1&pageSize=10
2022-09-23 02:23:20.460 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/menu/tree?onlyMenu=true
2022-09-23 02:23:20.465 | INFO     | register.middleware:intercept:17 - 访问记录:IP:127.0.0.1-method:GET-url:http://127.0.0.1:8082/api/system/dataDict/list?code=data_status
2022-09-23 02:23:20.476 | INFO     | utils.resp_code:resp_200:10 - OK
2022-09-23 02:23:20.482 | ERROR    | register.exception:all_exception_handler:103 - 全局异常
GETURL:http://127.0.0.1:8082/api/system/menu/tree?onlyMenu=true
Headers:Headers({'cookie': 'Hm_lvt_9d1e524198ede8205ac7c938c243344c=1660705580,1660819326,1662025780', 'accept-encoding': 'gzip, deflate, br', 'referer': 'http://localhost:2888/', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'same-origin', 'sec-ch-ua-platform': '"macOS"', 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InN1cGVyQWRtaW4iLCJ1c2VySWQiOiJzdXBlckFkbWluIiwiYXZhdGFyIjoiaHR0cHM6Ly9naW1nMi5iYWlkdS5jb20vaW1hZ2Vfc2VhcmNoL3NyYz1odHRwJTNBJTJGJTJGd3gxLnNpbmFpbWcuY24lMkZsYXJnZSUyRjAwNkFQb0ZZbHk4Z3UycTY3eDdoN2czMGRjMGRjMHUwLmdpZiZyZWZlcj1odHRwJTNBJTJGJTJGd3gxLnNpbmFpbWcuY24mYXBwPTIwMDImc2l6ZT1mOTk5OSwxMDAwMCZxPWE4MCZuPTAmZz0wbiZmbXQ9YXV0bz9zZWM9MTY2MDkwMDA0MyZ0PWEwZTNiN2U3ZGRjMGU4OWJkNmQwZWFmYmMyN2ZmOGE1IiwiZW1haWwiOiJhZG1pbkBweS5jb20iLCJwYXNzd29yZCI6Ijg4ODg4OCIsImRhc2hib2FyZCI6InN0YXRpc3RpY3MiLCJsb2dpbl90aW1lIjoiMjAyMi0wOS0yMlQwMjoyMDoyMCIsInJlbWFyayI6bnVsbCwidXBkYXRlZF9hdCI6IjIwMjItMDktMjJUMDI6MjA6MjAiLCJuaWNrbmFtZSI6Ilx1ODdkMlx1ODZjN1x1NTkyN1x1NWUwOCIsImlkIjoxLCJwaG9uZSI6IjE2ODU4ODg4OTg4IiwidXNlcl90eXBlIjoiMTAwIiwic2lnbmVkIjoiXHU0ZWJhXHU3NTFmXHU4MmU2XHU3N2VkXHVmZjBjXHU2MjExXHU1MTk5UHl0aG9uIiwibG9naW5faXAiOm51bGwsInN0YXR1cyI6IjEiLCJjcmVhdGVkX2F0IjoiMjAyMi0wOS0yMlQwMjoyMDoyMCIsImRlbGV0ZSI6IjAiLCJleHAiOjE2NjM5NTczOTR9.503Pz0r7epabDsrrkSv8UCepHGXMfQ6lydyZyLWwiVk', 'accept': 'application/json, text/plain, */*', 'content-type': 'application/json;charset=UTF-8', 'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36', 'sec-ch-ua-mobile': '?0', 'accept-language': 'zh_CN', 'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"', 'connection': 'close', 'host': '127.0.0.1:8082'})
Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 41, in call_next
    message = await recv_stream.receive()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 81, in receive
    return self.receive_nowait()
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/anyio/streams/memory.py", line 74, in receive_nowait
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 159, in __call__
    await self.app(scope, receive, _send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/cors.py", line 84, in __call__
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 63, in __call__
    response = await self.dispatch_func(request, call_next)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/register/middleware.py", line 20, in intercept
    return await call_next(request)  # 返回请求(跳过token)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 44, in call_next
    raise app_exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/middleware/base.py", line 34, in coro
    await self.app(scope, request.receive, send_stream.send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 82, in __call__
    raise exc
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/exceptions.py", line 71, in __call__
    await self.app(scope, receive, sender)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 656, in __call__
    await route.handle(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 259, in handle
    await self.app(scope, receive, send)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/starlette/routing.py", line 61, in app
    response = await func(request)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 226, in app
    raw_response = await run_endpoint_function(
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/fastapi/routing.py", line 159, in run_endpoint_function
    return await dependant.call(**values)
  File "/Users/lvright/Desktop/PyRattlesnake/backend/apis/common/menu.py", line 25, in get_tree_menu
    return resp_200(data=await getMenu.menuTree(db))
  File "/Users/lvright/Desktop/PyRattlesnake/backend/crud/menu.py", line 23, in menuTree
    sql = select(self.model)
  File "<string>", line 2, in select
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/sql/selectable.py", line 5279, in _create
    return cls.create_legacy_select(*args, **kw)
  File "<string>", line 2, in create_legacy_select
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/util/deprecations.py", line 401, in warned
    return fn(*args, **kwargs)
  File "/Users/lvright/Desktop/PyRattlesnake/venv/lib/python3.10/site-packages/sqlalchemy/sql/selectable.py", line 5135, in create_legacy_select
    self._raw_columns = [
TypeError: 'ModelMetaclass' object is not iterable

